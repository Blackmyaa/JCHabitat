<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>{{ page_title|default('JC Habitat & Services') }}</title>
		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
		<link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/sticky-footer/">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
		<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

		<meta name="description" content="{{ meta_description|default('JC Habitat, spécialiste du remplacement de cumulus') }}">

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<script src="https://kit.fontawesome.com/48410a61b9.js" crossorigin="anonymous"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
		<script src="https://cdn.ckeditor.com/ckeditor5/37.0.1/classic/ckeditor.js"></script>
		{% block stylesheets %}
			<style>
				.legal-container {
					max-width: 900px;
					margin: 0 auto;
					padding: 3rem 1.5rem;
					background: #fff;
					border-radius: 1rem;
					box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
				}

				.legal-container h1 {
					font-size: 2.2rem;
					font-weight: 700;
					color: #333;
					text-align: center;
					margin-bottom: 2rem;
				}

				.legal-container section {
					margin-bottom: 2rem;
				}

				.legal-container h3,
				.legal-container h4 {
					color: #0056b3;
					margin-bottom: 0.75rem;
				}

				.legal-container p {
					color: #444;
					line-height: 1.7;
				}

				.legal-container a {
					color: #0d6efd;
					text-decoration: none;
				}

				.legal-container a:hover {
					text-decoration: underline;
				}

				.divider {
					border-top: 2px solid #e9ecef;
					margin: 2rem 0;
				}
			</style>

		{% endblock %}

		{% block javascripts %}{% endblock %}
	</head>
	<body>
		{% block body %}{% endblock %}
		<!-- Bandeau cookies personnalisé -->
		<div id="cookieConsent" class="position-fixed bottom-0 start-0 end-0 bg-primary text-white p-3 shadow-lg" style="display:none; z-index:1050;">
			<div class="container d-flex flex-column flex-md-row justify-content-between align-items-center">
				<p class="mb-2 mb-md-0">
					Nous utilisons des cookies pour améliorer votre expérience.
					<a href="{{ path('legal_cookies') }}" class="text-warning text-decoration-underline">En savoir plus</a>.
				</p>
				<div>
					<button id="acceptAllCookies" class="btn btn-success me-2">Accepter tout</button>
					<button id="customCookies" class="btn btn-light text-primary">Paramétrer</button>
				</div>
			</div>
		</div>

		<!-- Modal de paramétrage -->
		<div class="modal fade" id="cookiesModal" tabindex="-1" aria-labelledby="cookiesModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header bg-primary text-white">
						<h5 class="modal-title" id="cookiesModalLabel">Paramétrage des cookies</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
					</div>
					<div class="modal-body">
						<p>Cochez les catégories de cookies que vous acceptez :</p>
						<form id="cookiesForm">
							<div class="form-check">
								<input class="form-check-input" type="checkbox" value="necessary" id="cookieNecessary" checked disabled>
								<label class="form-check-label" for="cookieNecessary">
									Cookies strictement nécessaires
								</label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="checkbox" value="analytics" id="cookieAnalytics">
								<label class="form-check-label" for="cookieAnalytics">
									Cookies de performance / analytics
								</label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="checkbox" value="personalization" id="cookiePersonalization">
								<label class="form-check-label" for="cookiePersonalization">
									Cookies de personnalisation
								</label>
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
						<button type="button" class="btn btn-primary" id="saveCookieSettings">Enregistrer</button>
					</div>
				</div>
			</div>
		</div>
        <script>
            document.addEventListener("DOMContentLoaded", function () {

                const cookieConsent = document.getElementById("cookieConsent");
                const cookiesModal = new bootstrap.Modal(document.getElementById('cookiesModal'));

                if (!localStorage.getItem("cookiesPreferences")) {
                    cookieConsent.style.display = "block";
                }

                document.getElementById("acceptAllCookies").addEventListener("click", function () {
                    localStorage.setItem("cookiesPreferences", JSON.stringify({
                        necessary: true,
                        analytics: true,
                        personalization: true
                    }));
                    cookieConsent.style.display = "none";
                });

                document.getElementById("customCookies").addEventListener("click", function () {
                    cookiesModal.show();
                });

                document.getElementById("saveCookieSettings").addEventListener("click", function () {
                    const preferences = {
                        necessary: true,
                        analytics: document.getElementById("cookieAnalytics").checked,
                        personalization: document.getElementById("cookiePersonalization").checked
                    };
                    localStorage.setItem("cookiesPreferences", JSON.stringify(preferences));
                    cookieConsent.style.display = "none";
                    cookiesModal.hide();
                });

            });
        </script>


	</body>
</html>
